import{u as H,k as J,q as U,c as b,w as l,a as t,g as m,h as c,o as d,b as r,d as s,t as p,e as a,l as V,n as M,f as de,F as j,r as S}from"./app-Cgyqco5e.js";import{_ as ue}from"./AppLayout-DB4VioH2.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-DX9VCuGY.js";import{_ as me}from"./Textarea.vue_vue_type_script_setup_true_lang-Na6mNp-F.js";import{_ as $,a as P,b as I,c as L,d as y}from"./SelectValue.vue_vue_type_script_setup_true_lang-CIalDINk.js";import{C as X,E as Q,_ as pe,a as A}from"./CategorySelect--ee7QFQj.js";import{_ as z}from"./index-CfrgMgmj.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-CBumIBXi.js";import{S as D}from"./spinner-we0NaEno.js";import{C as K}from"./circle-alert-u1_U4Jms.js";import{a as W,S as Y,b as ce}from"./FlashMessage-BkxJg_3D.js";import{I as N}from"./image-f3shAxxL.js";import{c as T}from"./createLucideIcon-DwRVYtr5.js";import{S as ge}from"./sparkles-CJkVi9fV.js";import{P as fe}from"./UserDropdown-Z_lunlqk.js";import{X as Z}from"./Teleport-BUs9OIgV.js";import{U as ve}from"./upload-JEy86TGZ.js";import{T as ee}from"./trash-2-Dh9QthQj.js";import{A as xe}from"./arrow-left-DeJ3wnPD.js";import"./useForwardExpose-43cBTImL.js";import"./useNonce-D95asP_8.js";import"./chevron-down-B-OnXKJy.js";import"./nullish-DiobDxmp.js";import"./useFormControl-DHtmIYDU.js";import"./VisuallyHiddenInput-CwksgtMT.js";import"./index-B_Hr3V4-.js";import"./package-DPeVUDVU.js";import"./loader-circle-BHkOripO.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=T("ArrowUpRightIcon",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=T("CalendarPlusIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=T("ExternalLinkIcon",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),ye={class:"flex justify-between items-center"},he={class:"font-semibold text-xl leading-tight"},qe={class:"flex items-center gap-3"},ke={class:"py-12"},we={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ve={key:0,class:"mb-6"},ze={class:"bg-destructive/15 border border-destructive/20 text-destructive px-4 py-3 rounded-lg flex items-center gap-3"},Ce={class:"text-sm mt-1"},Ue={key:1,class:"mb-6"},je={class:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg flex items-center gap-3"},Se={class:"text-sm mt-1"},Ee={class:"hidden lg:block sticky top-4 z-30 float-right w-60 ml-8 bg-card rounded-lg border shadow-sm"},Me={class:"p-4"},$e={class:"space-y-2 text-sm"},Pe={href:"#general",class:"flex items-center text-muted-foreground hover:text-foreground"},Ie={href:"#storage",class:"flex items-center text-muted-foreground hover:text-foreground"},Le={href:"#images",class:"flex items-center text-muted-foreground hover:text-foreground"},Ae={href:"#pricing",class:"flex items-center text-muted-foreground hover:text-foreground"},De={href:"#reservations",class:"flex items-center text-muted-foreground hover:text-foreground"},Ne={class:"mt-6 pt-6 border-t"},Re={class:"space-y-4 text-sm"},Te={class:"bg-card text-card-foreground rounded-lg border shadow-sm overflow-hidden"},Be={id:"general",class:"p-6 space-y-8"},Oe={class:"flex items-center gap-4 pb-4 border-b"},Fe={class:"grid gap-8 sm:grid-cols-2"},Ge={key:0,class:"mt-2 text-sm text-destructive"},He={key:0,class:"mt-2 text-sm text-destructive"},Je={class:"grid gap-8 sm:grid-cols-2"},Xe={key:0,class:"mt-2 text-sm text-destructive"},Qe={key:0,class:"mt-2 text-sm text-destructive"},Ke={id:"storage",class:"p-6 space-y-8"},We={class:"flex items-center gap-4 pb-4 border-b"},Ye={class:"grid gap-8"},Ze={class:"flex items-center"},et={class:"flex items-center"},tt={class:"flex items-center"},st={class:"flex items-center"},rt={key:0,class:"mt-2 text-sm text-destructive"},it={key:0,class:"mt-2 text-sm text-destructive"},ot={class:"grid gap-8 sm:grid-cols-2"},lt={key:0,class:"mt-2 text-sm text-destructive"},at={key:0,class:"mt-2 text-sm text-destructive"},nt={id:"images",class:"p-6 space-y-8"},dt={class:"flex items-center gap-4 pb-4 border-b"},ut={class:"space-y-6"},mt={class:"flex items-start p-4 text-sm bg-muted/20 rounded-lg border border-muted"},pt={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},ct=["src","alt"],gt=["onClick"],ft={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},vt=["src"],xt=["onClick"],bt={class:"flex items-center justify-center w-full"},_t={class:"flex flex-col items-center justify-center pt-5 pb-6"},yt=["disabled"],ht={id:"pricing",class:"p-6 space-y-8"},qt={class:"flex items-center gap-4 pb-4 border-b"},kt={class:"space-y-6"},wt={class:"grid gap-8 sm:grid-cols-3"},Vt={class:"relative mt-2"},zt={key:0,class:"mt-2 text-sm text-destructive"},Ct={class:"relative mt-2"},Ut={key:0,class:"mt-2 text-sm text-destructive"},jt={class:"relative mt-2"},St={key:0,class:"mt-2 text-sm text-destructive"},Et={class:"grid gap-4 pt-4"},Mt={class:"flex items-center p-4 bg-muted/20 rounded-lg border border-muted cursor-pointer hover:bg-muted/30 transition-colors"},$t={class:"flex items-center p-4 bg-muted/20 rounded-lg border border-muted cursor-pointer hover:bg-muted/30 transition-colors"},Pt={class:"flex items-center p-4 bg-muted/20 rounded-lg border border-muted cursor-pointer hover:bg-muted/30 transition-colors"},It={id:"reservations",class:"p-6 space-y-8"},Lt={class:"flex items-center gap-4 pb-4 border-b"},At={class:"flex items-center justify-between gap-x-6 p-6"},Dt={class:"flex items-center gap-4"},Nt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Rt={class:"relative bg-card text-card-foreground rounded-lg border shadow-lg max-w-md w-full mx-4"},Tt={class:"p-6"},Bt={class:"flex items-center gap-3 mb-4"},Ot={class:"flex-shrink-0 w-10 h-10 bg-destructive/10 rounded-full flex items-center justify-center"},Ft={class:"text-sm text-muted-foreground mb-4"},Gt={class:"flex items-center justify-end gap-3"},hs={__name:"Edit",props:{organization:{type:Object,required:!0},equipment:{type:Object,required:!0},depots:{type:Array,required:!0},organizations:{type:Array,required:!0}},setup(v){var O,F,G;const u=v,i=H({_method:"PUT",name:u.equipment.name,brand:u.equipment.brand,description:u.equipment.description,category_id:u.equipment.category_id,organization_id:u.equipment.organization_id,condition:u.equipment.condition,quantity:u.equipment.quantity??1,depot_id:u.equipment.depot_id,purchase_price:((O=u.equipment.purchase_price)==null?void 0:O.toString().replace(".",","))||"0,00",rental_price:((F=u.equipment.rental_price)==null?void 0:F.toString().replace(".",","))||"0,00",deposit_amount:((G=u.equipment.deposit_amount)==null?void 0:G.toString().replace(".",","))||"0,00",is_available:u.equipment.is_available,requires_deposit:u.equipment.requires_deposit,is_rentable:u.equipment.is_rentable,last_maintenance_date:u.equipment.last_maintenance_date,next_maintenance_date:u.equipment.next_maintenance_date,images:[],removed_images:[]}),h=J([]),q=J(!1),C=U(()=>{var n;return((n=u.equipment.images)==null?void 0:n.filter(e=>!i.removed_images.includes(e.id)))||[]}),B=U(()=>C.value.length+i.images.length>=10),k=H({_method:"DELETE"}),te=U(()=>u.organizations.find(n=>n.id===i.organization_id)||u.organization),se=U(()=>u.depots.filter(n=>n.organization_id===i.organization_id)),re=()=>{i.depot_id=null},ie=n=>{const e=Array.from(n.target.files||[]),g=10-(C.value.length+i.images.length);e.slice(0,g).forEach(o=>{const w=URL.createObjectURL(o);h.value.push(w),i.images.push(o)}),n.target.value=null},oe=n=>{URL.revokeObjectURL(h.value[n]),h.value.splice(n,1),i.images.splice(n,1)},le=n=>{i.removed_images.push(n)},E=(n,e)=>{let g=n.target.value;g=g.replace(",","."),g=g.replace(/[^\d.]/g,"");const x=g.split(".");x.length>2&&(g=x[0]+"."+x.slice(1).join(""));const o=g?g.replace(".",","):"0,00";i[e]=g||"0.00",n.target.value=o},ae=()=>{i.post(route("app.organizations.equipments.update",u.equipment.id),{preserveScroll:!0,forceFormData:!0})},ne=()=>{k.delete(route("app.organizations.equipments.destroy",u.equipment),{onSuccess:()=>{q.value=!1},onError:n=>{console.error("Erreur lors de la suppression:",n)}})};return(n,e)=>(d(),b(ue,{title:"Modifier "+v.equipment.name},{header:l(()=>[t("div",ye,[t("div",null,[t("h2",he,p(v.equipment.name),1)]),t("div",qe,[r(s(V),{href:n.route("app.organizations.equipments.index",v.organization),class:"inline-flex items-center bg-background hover:bg-accent hover:text-accent-foreground h-10 py-2 px-4 transition-colors"},{default:l(()=>[r(s(xe),{class:"w-4 h-4 mr-2"}),e[20]||(e[20]=a(" Retour à la liste ",-1))]),_:1},8,["href"])])])]),default:l(()=>{var g,x;return[t("div",ke,[t("div",we,[(g=n.$page.props.flash)!=null&&g.error?(d(),m("div",Ve,[t("div",ze,[r(s(K),{class:"w-5 h-5 flex-shrink-0"}),t("div",null,[e[21]||(e[21]=t("p",{class:"font-medium"},"Impossible de supprimer l'équipement",-1)),t("p",Ce,p(n.$page.props.flash.error),1)])])])):c("",!0),(x=n.$page.props.flash)!=null&&x.success?(d(),m("div",Ue,[t("div",je,[r(s(W),{class:"w-5 h-5 flex-shrink-0"}),t("div",null,[e[22]||(e[22]=t("p",{class:"font-medium"},"Succès",-1)),t("p",Se,p(n.$page.props.flash.success),1)])])])):c("",!0),t("div",Ee,[t("nav",Me,[e[31]||(e[31]=t("p",{class:"text-sm font-medium mb-3"},"Navigation rapide",-1)),t("ul",$e,[t("li",null,[t("a",Pe,[r(s(X),{class:"w-4 h-4 mr-2"}),e[23]||(e[23]=a(" Informations ",-1))])]),t("li",null,[t("a",Ie,[r(s(Y),{class:"w-4 h-4 mr-2"}),e[24]||(e[24]=a(" État et stockage ",-1))])]),t("li",null,[t("a",Le,[r(s(N),{class:"w-4 h-4 mr-2"}),e[25]||(e[25]=a(" Photos ",-1))])]),t("li",null,[t("a",Ae,[r(s(Q),{class:"w-4 h-4 mr-2"}),e[26]||(e[26]=a(" Tarification ",-1))])]),t("li",null,[t("a",De,[r(s(R),{class:"w-4 h-4 mr-2"}),e[27]||(e[27]=a(" Réservations ",-1))])])]),t("div",Ne,[e[30]||(e[30]=t("p",{class:"text-sm font-medium mb-3"},"Actions",-1)),t("ul",Re,[t("li",null,[r(s(V),{href:n.route("equipments.show",v.equipment.id),class:"flex items-center text-muted-foreground hover:text-foreground group",target:"_blank"},{default:l(()=>[r(s(_e),{class:"w-4 h-4 mr-2"}),e[28]||(e[28]=a(" Voir la fiche publique ",-1)),r(s(be),{class:"w-3 h-3 ml-1 opacity-0 -translate-y-1 translate-x-1 group-hover:opacity-100 group-hover:translate-y-0 group-hover:translate-x-0 transition-all"})]),_:1},8,["href"])]),t("li",null,[r(s(V),{href:n.route("app.organizations.reservations.out.create",{equipment:v.equipment.id}),class:"flex items-center text-muted-foreground hover:text-foreground group"},{default:l(()=>[r(s(R),{class:"w-4 h-4 mr-2"}),e[29]||(e[29]=a(" Créer une réservation ",-1))]),_:1},8,["href"])]),t("li",null,[r(s(z),{type:"submit",form:"equipment-form",disabled:s(i).processing,class:M([{"opacity-25":s(i).processing},"focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2"])},{default:l(()=>[s(i).processing?(d(),b(D,{key:0,class:"w-4 h-4 mr-2","aria-hidden":"true"})):c("",!0),a(" "+p(s(i).processing?"Modification en cours...":"Mettre à jour"),1)]),_:1},8,["disabled","class"])])])])])]),t("div",Te,[t("form",{onSubmit:de(ae,["prevent"]),class:"divide-y",id:"equipment-form"},[e[68]||(e[68]=t("p",{class:"p-6 text-sm text-muted-foreground/75"},[a("Les champs marqués d'un "),t("span",{class:"text-destructive"},"*"),a(" sont obligatoires")],-1)),t("section",Be,[t("div",Oe,[r(s(X),{class:"w-5 h-5 text-muted-foreground"}),e[32]||(e[32]=t("h3",{class:"text-lg font-medium"},"Informations générales",-1))]),t("div",Fe,[t("div",null,[r(s(f),{required:"",class:"text-base flex items-center gap-1"},{default:l(()=>[...e[33]||(e[33]=[a(" Nom ",-1),t("span",{class:"text-destructive","aria-hidden":"true"},"*",-1)])]),_:1}),r(s(_),{modelValue:s(i).name,"onUpdate:modelValue":e[0]||(e[0]=o=>s(i).name=o),type:"text",required:"",autofocus:"",placeholder:"Ex: Perceuse Bosch Professional",class:"mt-2"},null,8,["modelValue"]),s(i).errors.name?(d(),m("p",Ge,p(s(i).errors.name),1)):c("",!0)]),t("div",null,[r(s(f),{required:"",class:"text-base flex items-center gap-1"},{default:l(()=>[...e[34]||(e[34]=[a(" Marque ",-1)])]),_:1}),r(s(_),{modelValue:s(i).brand,"onUpdate:modelValue":e[1]||(e[1]=o=>s(i).brand=o),type:"text",placeholder:"Ex: Bosch",class:"mt-2"},null,8,["modelValue"]),s(i).errors.brand?(d(),m("p",He,p(s(i).errors.brand),1)):c("",!0)])]),t("div",Je,[t("div",null,[r(s(f),{required:"",class:"text-base flex items-center gap-1"},{default:l(()=>[...e[35]||(e[35]=[a(" Catégorie ",-1),t("span",{class:"text-destructive","aria-hidden":"true"},"*",-1)])]),_:1}),r(pe,{modelValue:s(i).category_id,"onUpdate:modelValue":e[2]||(e[2]=o=>s(i).category_id=o),required:""},null,8,["modelValue"]),s(i).errors.category_id?(d(),m("p",Xe,p(s(i).errors.category_id),1)):c("",!0)])]),t("div",null,[r(s(f),{class:"text-base"},{default:l(()=>[...e[36]||(e[36]=[a("Description",-1)])]),_:1}),r(s(me),{modelValue:s(i).description,"onUpdate:modelValue":e[3]||(e[3]=o=>s(i).description=o),rows:"3",placeholder:"Décrivez les caractéristiques principales du matériel...",class:"mt-2"},null,8,["modelValue"]),e[37]||(e[37]=t("p",{class:"mt-1.5 text-xs text-muted-foreground/75"},"Une description détaillée aidera les utilisateurs à mieux comprendre le matériel",-1)),s(i).errors.description?(d(),m("p",Qe,p(s(i).errors.description),1)):c("",!0)])]),t("section",Ke,[t("div",We,[r(s(Y),{class:"w-5 h-5 text-muted-foreground"}),e[38]||(e[38]=t("h3",{class:"text-lg font-medium"},"État et stockage",-1))]),t("div",Ye,[t("div",null,[r(s(f),{required:"",class:"text-base flex items-center gap-1"},{default:l(()=>[...e[39]||(e[39]=[a(" État ",-1),t("span",{class:"text-destructive","aria-hidden":"true"},"*",-1)])]),_:1}),r(s($),{modelValue:s(i).condition,"onUpdate:modelValue":e[4]||(e[4]=o=>s(i).condition=o),class:"mt-2",required:""},{default:l(()=>[r(s(P),null,{default:l(()=>[r(s(I),{placeholder:"Sélectionnez l'état"})]),_:1}),r(s(L),null,{default:l(()=>[r(s(y),{value:"new"},{default:l(()=>[t("div",Ze,[r(s(ge),{class:"w-4 h-4 mr-2 text-green-500"}),e[40]||(e[40]=t("span",null,"Neuf",-1))])]),_:1}),r(s(y),{value:"good"},{default:l(()=>[t("div",et,[r(s(W),{class:"w-4 h-4 mr-2 text-blue-500"}),e[41]||(e[41]=t("span",null,"Bon",-1))])]),_:1}),r(s(y),{value:"fair"},{default:l(()=>[t("div",tt,[r(s(K),{class:"w-4 h-4 mr-2 text-yellow-500"}),e[42]||(e[42]=t("span",null,"Moyen",-1))])]),_:1}),r(s(y),{value:"poor"},{default:l(()=>[t("div",st,[r(s(ce),{class:"w-4 h-4 mr-2 text-red-500"}),e[43]||(e[43]=t("span",null,"Mauvais",-1))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(i).errors.condition?(d(),m("p",rt,p(s(i).errors.condition),1)):c("",!0)]),t("div",null,[r(s(f),{required:"",class:"text-base flex items-center gap-1"},{default:l(()=>[...e[44]||(e[44]=[a(" Quantité disponible ",-1),t("span",{class:"text-destructive","aria-hidden":"true"},"*",-1)])]),_:1}),r(s(_),{modelValue:s(i).quantity,"onUpdate:modelValue":e[5]||(e[5]=o=>s(i).quantity=o),type:"number",min:"1",required:"",placeholder:"Ex: 1",class:"mt-2"},null,8,["modelValue"]),e[45]||(e[45]=t("p",{class:"mt-1.5 text-xs text-muted-foreground/75"},"Nombre d'unités disponibles de ce matériel",-1)),s(i).errors.quantity?(d(),m("p",it,p(s(i).errors.quantity),1)):c("",!0)]),t("div",ot,[t("div",null,[r(s(f),{required:"",class:"text-base flex items-center gap-1"},{default:l(()=>[...e[46]||(e[46]=[a(" Organisation propriétaire ",-1),t("span",{class:"text-destructive","aria-hidden":"true"},"*",-1)])]),_:1}),r(s($),{modelValue:s(i).organization_id,"onUpdate:modelValue":[e[6]||(e[6]=o=>s(i).organization_id=o),re],required:"",class:"mt-2"},{default:l(()=>[r(s(P),null,{default:l(()=>[r(s(I),{placeholder:"Sélectionnez une organisation"})]),_:1}),r(s(L),null,{default:l(()=>[(d(!0),m(j,null,S(v.organizations,o=>(d(),b(s(y),{key:o.id,value:o.id},{default:l(()=>[a(p(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(i).errors.organization_id?(d(),m("p",lt,p(s(i).errors.organization_id),1)):c("",!0)]),t("div",null,[r(s(f),{required:"",class:"text-base flex items-center gap-1"},{default:l(()=>[...e[47]||(e[47]=[a(" Lieu de stockage ",-1),t("span",{class:"text-destructive","aria-hidden":"true"},"*",-1)])]),_:1}),r(s($),{modelValue:s(i).depot_id,"onUpdate:modelValue":e[7]||(e[7]=o=>s(i).depot_id=o),required:"",class:"mt-2"},{default:l(()=>[r(s(P),null,{default:l(()=>[r(s(I),{placeholder:"Sélectionnez un lieu de stockage"})]),_:1}),r(s(L),null,{default:l(()=>[(d(!0),m(j,null,S(se.value,o=>(d(),b(s(y),{key:o.id,value:o.id},{default:l(()=>[a(p(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),r(s(V),{href:n.route("app.organizations.depots.index",te.value),class:"inline-flex items-center text-xs text-primary/80 hover:text-primary mt-2"},{default:l(()=>[r(s(fe),{class:"w-3 h-3 mr-1"}),e[48]||(e[48]=a(" Ajouter un lieu de stockage ",-1))]),_:1},8,["href"]),s(i).errors.depot_id?(d(),m("p",at,p(s(i).errors.depot_id),1)):c("",!0)])])])]),t("section",nt,[t("div",dt,[r(s(N),{class:"w-5 h-5 text-muted-foreground"}),e[49]||(e[49]=t("h3",{class:"text-lg font-medium"},"Photos",-1))]),t("div",ut,[t("div",mt,[r(s(N),{class:"w-5 h-5 mr-3 flex-shrink-0 text-muted-foreground/75"}),e[50]||(e[50]=t("div",{class:"space-y-1"},[t("p",{class:"text-muted-foreground/75"}," Ajoutez jusqu'à 3 photos de votre matériel. "),t("ul",{class:"text-xs text-muted-foreground/75 list-disc list-inside"},[t("li",null,"Formats acceptés : JPG, JPEG, PNG"),t("li",null,"Taille maximale par image : 10 MB")])],-1))]),C.value.length?(d(),m("div",pt,[(d(!0),m(j,null,S(C.value,o=>(d(),m("div",{key:o.id,class:"relative group aspect-square"},[t("img",{src:o.url,alt:o.original_name,class:"w-full h-full object-cover rounded-lg"},null,8,ct),t("button",{type:"button",onClick:w=>le(o.id),class:"absolute top-2 right-2 p-1 bg-destructive/90 hover:bg-destructive text-destructive-foreground rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[r(s(Z),{class:"w-4 h-4"})],8,gt)]))),128))])):c("",!0),h.value.length?(d(),m("div",ft,[(d(!0),m(j,null,S(h.value,(o,w)=>(d(),m("div",{key:w,class:"relative group aspect-square"},[t("img",{src:o,class:"w-full h-full object-cover rounded-lg"},null,8,vt),t("button",{type:"button",onClick:Ht=>oe(w),class:"absolute top-2 right-2 p-1 bg-destructive/90 hover:bg-destructive text-destructive-foreground rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[r(s(Z),{class:"w-4 h-4"})],8,xt)]))),128))])):c("",!0),t("div",bt,[t("label",{class:M(["flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-muted/20 border-muted hover:bg-muted/30 transition-colors",{"opacity-50 cursor-not-allowed":B.value}])},[t("div",_t,[r(s(ve),{class:"w-8 h-8 mb-3 text-muted-foreground"}),e[51]||(e[51]=t("p",{class:"mb-2 text-sm text-muted-foreground"},[t("span",{class:"font-medium"},"Cliquez pour ajouter"),a(" vos photos ici ")],-1))]),t("input",{type:"file",class:"hidden",accept:"image/png,image/jpeg,image/jpg",multiple:"",onChange:ie,disabled:B.value},null,40,yt)],2)])])]),t("section",ht,[t("div",qt,[r(s(Q),{class:"w-5 h-5 text-muted-foreground"}),e[52]||(e[52]=t("h3",{class:"text-lg font-medium"},"Tarification",-1))]),t("div",kt,[t("div",wt,[t("div",null,[r(s(f),{class:"text-base"},{default:l(()=>[...e[53]||(e[53]=[a("Prix d'achat",-1)])]),_:1}),t("div",Vt,[r(s(_),{modelValue:s(i).purchase_price,"onUpdate:modelValue":e[8]||(e[8]=o=>s(i).purchase_price=o),type:"text",inputmode:"decimal",class:"pl-7",onInput:e[9]||(e[9]=o=>E(o,"purchase_price"))},null,8,["modelValue"]),e[54]||(e[54]=t("span",{class:"absolute left-2 top-1/2 -translate-y-1/2 text-muted-foreground"},"€",-1))]),s(i).errors.purchase_price?(d(),m("p",zt,p(s(i).errors.purchase_price),1)):c("",!0)]),t("div",null,[r(s(f),{class:"text-base"},{default:l(()=>[...e[55]||(e[55]=[a("Prix de location",-1)])]),_:1}),t("div",Ct,[r(s(_),{modelValue:s(i).rental_price,"onUpdate:modelValue":e[10]||(e[10]=o=>s(i).rental_price=o),type:"text",inputmode:"decimal",class:"pl-7",onInput:e[11]||(e[11]=o=>E(o,"rental_price"))},null,8,["modelValue"]),e[56]||(e[56]=t("span",{class:"absolute left-2 top-1/2 -translate-y-1/2 text-muted-foreground"},"€",-1))]),e[57]||(e[57]=t("p",{class:"mt-1.5 text-xs text-muted-foreground/75"},"Prix par jour",-1)),s(i).errors.rental_price?(d(),m("p",Ut,p(s(i).errors.rental_price),1)):c("",!0)]),t("div",null,[r(s(f),{class:"text-base"},{default:l(()=>[...e[58]||(e[58]=[a("Montant de la caution",-1)])]),_:1}),t("div",jt,[r(s(_),{modelValue:s(i).deposit_amount,"onUpdate:modelValue":e[12]||(e[12]=o=>s(i).deposit_amount=o),type:"text",inputmode:"decimal",class:"pl-7",disabled:!s(i).requires_deposit,onInput:e[13]||(e[13]=o=>E(o,"deposit_amount"))},null,8,["modelValue","disabled"]),e[59]||(e[59]=t("span",{class:"absolute left-2 top-1/2 -translate-y-1/2 text-muted-foreground"},"€",-1))]),e[60]||(e[60]=t("p",{class:"mt-1.5 text-xs text-muted-foreground/75"},"0 = pas de caution",-1)),s(i).errors.deposit_amount?(d(),m("p",St,p(s(i).errors.deposit_amount),1)):c("",!0)])]),t("div",Et,[t("label",Mt,[r(s(A),{modelValue:s(i).is_available,"onUpdate:modelValue":e[14]||(e[14]=o=>s(i).is_available=o),class:"data-[state=checked]:bg-primary"},null,8,["modelValue"]),e[61]||(e[61]=t("div",{class:"ml-3"},[t("span",{class:"text-sm font-medium"},"Disponible immédiatement"),t("p",{class:"text-xs text-muted-foreground/75 mt-0.5"},"Le matériel peut être réservé dès maintenant")],-1))]),t("label",$t,[r(s(A),{modelValue:s(i).requires_deposit,"onUpdate:modelValue":e[15]||(e[15]=o=>s(i).requires_deposit=o),class:"data-[state=checked]:bg-primary"},null,8,["modelValue"]),e[62]||(e[62]=t("div",{class:"ml-3"},[t("span",{class:"text-sm font-medium"},"Caution requise"),t("p",{class:"text-xs text-muted-foreground/75 mt-0.5"},"Une caution sera demandée pour la location")],-1))]),t("label",Pt,[r(s(A),{modelValue:s(i).is_rentable,"onUpdate:modelValue":e[16]||(e[16]=o=>s(i).is_rentable=o),class:"data-[state=checked]:bg-primary"},null,8,["modelValue"]),e[63]||(e[63]=t("div",{class:"ml-3"},[t("span",{class:"text-sm font-medium"},"Disponible à la location"),t("p",{class:"text-xs text-muted-foreground/75 mt-0.5"},"Le matériel peut être loué par d'autres utilisateurs")],-1))])])])]),t("section",It,[t("div",Lt,[r(s(R),{class:"w-5 h-5 text-muted-foreground"}),e[64]||(e[64]=t("h3",{class:"text-lg font-medium"},"Réservations",-1))]),e[65]||(e[65]=t("div",{class:"bg-muted/50 rounded-lg p-4"},[t("p",{class:"text-sm text-muted-foreground mb-3"},[t("strong",null,"Note :"),a(" L'équipement ne peut pas être supprimé s'il a des réservations actives (en cours) ou des réservations confirmées à venir. ")]),t("div",{class:"grid gap-4 sm:grid-cols-2"},[t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-2 h-2 bg-orange-500 rounded-full"}),t("span",{class:"text-sm"},"Réservations en attente : Peuvent être annulées automatiquement")]),t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-2 h-2 bg-red-500 rounded-full"}),t("span",{class:"text-sm"},"Réservations confirmées : Empêchent la suppression")])])],-1))]),t("div",At,[t("div",Dt,[r(s(V),{href:n.route("app.organizations.equipments.index",v.organization),class:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 rounded-sm"},{default:l(()=>[...e[66]||(e[66]=[a(" Annuler ",-1)])]),_:1},8,["href"]),r(s(z),{type:"button",variant:"destructive",size:"sm",onClick:e[17]||(e[17]=o=>q.value=!0),class:"focus-visible:ring-2 focus-visible:ring-destructive focus-visible:ring-offset-2"},{default:l(()=>[r(s(ee),{class:"w-4 h-4 mr-2"}),e[67]||(e[67]=a(" Supprimer ",-1))]),_:1})]),r(s(z),{type:"submit",disabled:s(i).processing,class:M([{"opacity-25":s(i).processing},"focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2"]),size:"lg"},{default:l(()=>[s(i).processing?(d(),b(D,{key:0,class:"w-4 h-4 mr-2","aria-hidden":"true"})):c("",!0),a(" "+p(s(i).processing?"Modification en cours...":"Enregistrer les modifications"),1)]),_:1},8,["disabled","class"])])],32)])])]),q.value?(d(),m("div",Nt,[t("div",{class:"fixed inset-0 bg-black/50",onClick:e[18]||(e[18]=o=>q.value=!1)}),t("div",Rt,[t("div",Tt,[t("div",Bt,[t("div",Ot,[r(s(ee),{class:"w-5 h-5 text-destructive"})]),e[69]||(e[69]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Supprimer l'équipement"),t("p",{class:"text-sm text-muted-foreground"},"Cette action est irréversible")],-1))]),t("p",Ft,[e[70]||(e[70]=a(" Êtes-vous sûr de vouloir supprimer l'équipement ",-1)),t("strong",null,p(v.equipment.name),1),e[71]||(e[71]=a(" ? Cette action supprimera définitivement l'équipement et toutes ses données associées. ",-1))]),e[73]||(e[73]=t("div",{class:"bg-muted/50 rounded-lg p-3 mb-6"},[t("p",{class:"text-xs text-muted-foreground mb-2 font-medium"},"Ce qui se passera :"),t("ul",{class:"text-xs text-muted-foreground space-y-1"},[t("li",null,"• L'équipement sera supprimé définitivement"),t("li",null,"• Toutes les photos seront supprimées"),t("li",null,"• Les réservations en attente seront annulées automatiquement"),t("li",null,"• Les réservations confirmées empêcheront la suppression")])],-1)),t("div",Gt,[r(s(z),{type:"button",variant:"outline",onClick:e[19]||(e[19]=o=>q.value=!1),disabled:s(k).processing},{default:l(()=>[...e[72]||(e[72]=[a(" Annuler ",-1)])]),_:1},8,["disabled"]),r(s(z),{type:"button",variant:"destructive",onClick:ne,disabled:s(k).processing},{default:l(()=>[s(k).processing?(d(),b(D,{key:0,class:"w-4 h-4 mr-2"})):c("",!0),a(" "+p(s(k).processing?"Suppression...":"Supprimer"),1)]),_:1},8,["disabled"])])])])])):c("",!0)]}),_:1},8,["title"]))}};export{hs as default};
