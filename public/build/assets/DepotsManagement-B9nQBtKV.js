import{k as c,u as O,y as T,g as x,b as t,a,w as l,d as e,e as r,f as b,o as k,F as I,r as J,c as L,t as f,J as P,i as H}from"./app-Cgyqco5e.js";import{_}from"./index-CfrgMgmj.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-DX9VCuGY.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-CBumIBXi.js";import{_ as U}from"./Textarea.vue_vue_type_script_setup_true_lang-Na6mNp-F.js";import{_ as D}from"./AddressInput-DO3-ucfw.js";import{a as K,b as z,c as C,d as Q,e as S,_ as W}from"./TableHeader.vue_vue_type_script_setup_true_lang-APZDFrKz.js";import{_ as m}from"./InputError.vue_vue_type_script_setup_true_lang-y1hT5PbM.js";import{_ as X}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-BPURApwd.js";import{a as w,_ as A}from"./DialogContent.vue_vue_type_script_setup_true_lang-CLzAqvnw.js";import{_ as Y,a as q}from"./DialogFooter.vue_vue_type_script_setup_true_lang-C0yVyRvA.js";import{_ as F,a as N}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Ez63R66Q.js";import{_ as j}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DOlfFn6J.js";import"./useForwardExpose-43cBTImL.js";import"./debounce-DdQbsw7X.js";import"./Teleport-BUs9OIgV.js";import"./createLucideIcon-DwRVYtr5.js";import"./map-pin-B1SYAlYE.js";import"./DialogPortal-DebP4ZVQ.js";import"./DialogDescription-BYzOpbSc.js";import"./DialogTitle-CLvWREPx.js";const Z={class:"space-y-6"},h={class:"space-y-4"},ee={class:"grid gap-4 py-4"},se={class:"grid gap-2"},te={class:"grid gap-2"},oe={class:"grid gap-2"},le={class:"grid grid-cols-2 gap-4"},ie={class:"grid gap-2"},de={class:"grid gap-2"},ae={class:"rounded-md border dark:border-gray-800"},re={class:"font-medium"},ne={class:"text-sm text-gray-500"},ue={class:"flex items-center gap-2"},me=["onSubmit"],pe={class:"grid gap-4 py-4"},fe={class:"grid gap-2"},_e={class:"grid gap-2"},ge={class:"grid gap-2"},Ee={__name:"DepotsManagement",props:{depots:{type:Array,default:()=>[]}},setup(B){const y=c(!1),g=c(!1),V=c(!1),o=O({name:"",description:"",address:"",city:"",latitude:"",longitude:"",postal_code:"",country:"FR"}),p=c(null),$=()=>{o.reset(),o.clearErrors(),p.value=null};T(p,i=>{if(V.value)return;if(!i){o.address="",o.city="",o.postal_code="",o.latitude="",o.longitude="";return}const s=[];i.housenumber&&s.push(i.housenumber),i.street&&s.push(i.street),o.address=s.join(" "),o.city=i.city,o.postal_code=i.postcode,o.latitude=i.lat,o.longitude=i.lng});const M=()=>{o.post(route("app.organizations.depots.store"),{preserveScroll:!0,onSuccess:()=>{$(),y.value=!1}})},E=i=>{V.value=!0,o.name=i.name,o.description=i.description,o.address=i.address,o.city=i.city,o.latitude=i.latitude,o.longitude=i.longitude,o.postal_code=i.postal_code,o.country=i.country,P(()=>{p.value={name:i.address,street:i.address,city:i.city,postcode:i.postal_code,lat:i.latitude,lng:i.longitude},V.value=!1})},R=i=>{o.put(route("app.organizations.depots.update",i.id),{preserveScroll:!0,onSuccess:()=>{$(),g.value=!1}})},G=i=>{confirm("Êtes-vous sûr de vouloir supprimer ce dépôt ?")&&H.delete(route("app.organizations.depots.destroy",i.id),{preserveScroll:!0})};return(i,s)=>(k(),x("section",Z,[t(X,{title:"Gestion des dépôts",description:"Gérez les lieux de stockage de votre organisation."}),a("div",h,[t(e(A),{open:y.value,"onUpdate:open":s[5]||(s[5]=d=>y.value=d)},{default:l(()=>[t(e(j),{asChild:""},{default:l(()=>[t(e(_),{onClick:$},{default:l(()=>[...s[10]||(s[10]=[r("Ajouter un dépôt",-1)])]),_:1})]),_:1}),t(e(w),null,{default:l(()=>[a("form",{onSubmit:b(M,["prevent"])},[t(e(F),null,{default:l(()=>[t(e(N),null,{default:l(()=>[...s[11]||(s[11]=[r("Ajouter un nouveau dépôt",-1)])]),_:1}),t(e(Y),null,{default:l(()=>[...s[12]||(s[12]=[r(" Créez un nouveau lieu de stockage pour votre organisation. ",-1)])]),_:1})]),_:1}),a("div",ee,[a("div",se,[t(e(u),{for:"name"},{default:l(()=>[...s[13]||(s[13]=[r("Nom du dépôt",-1)])]),_:1}),t(e(v),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":s[0]||(s[0]=d=>e(o).name=d),required:""},null,8,["modelValue"]),t(m,{message:e(o).errors.name},null,8,["message"])]),a("div",te,[t(e(u),{for:"description"},{default:l(()=>[...s[14]||(s[14]=[r("Description",-1)])]),_:1}),t(e(U),{id:"description",modelValue:e(o).description,"onUpdate:modelValue":s[1]||(s[1]=d=>e(o).description=d),rows:"3"},null,8,["modelValue"]),t(m,{message:e(o).errors.description},null,8,["message"])]),a("div",oe,[t(e(u),{for:"address"},{default:l(()=>[...s[15]||(s[15]=[r("Adresse",-1)])]),_:1}),t(D,{id:"location",modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=d=>p.value=d),placeholder:"Rechercher une adresse",required:""},null,8,["modelValue"]),t(m,{message:e(o).errors.address},null,8,["message"])]),a("div",le,[a("div",ie,[t(e(u),{for:"city"},{default:l(()=>[...s[16]||(s[16]=[r("Ville",-1)])]),_:1}),t(e(v),{id:"city",modelValue:e(o).city,"onUpdate:modelValue":s[3]||(s[3]=d=>e(o).city=d),required:""},null,8,["modelValue"]),t(m,{message:e(o).errors.city},null,8,["message"])]),a("div",de,[t(e(u),{for:"postal_code"},{default:l(()=>[...s[17]||(s[17]=[r("Code postal",-1)])]),_:1}),t(e(v),{id:"postal_code",modelValue:e(o).postal_code,"onUpdate:modelValue":s[4]||(s[4]=d=>e(o).postal_code=d),required:""},null,8,["modelValue"]),t(m,{message:e(o).errors.postal_code},null,8,["message"])])])]),t(e(q),null,{default:l(()=>[t(e(_),{type:"submit",disabled:e(o).processing},{default:l(()=>[...s[18]||(s[18]=[r(" Créer le dépôt ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),a("div",ae,[t(e(W),null,{default:l(()=>[t(e(K),null,{default:l(()=>[t(e(z),null,{default:l(()=>[t(e(C),null,{default:l(()=>[...s[19]||(s[19]=[r("Nom",-1)])]),_:1}),t(e(C),null,{default:l(()=>[...s[20]||(s[20]=[r("Adresse",-1)])]),_:1}),t(e(C),{class:"w-[100px]"},{default:l(()=>[...s[21]||(s[21]=[r("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(Q),null,{default:l(()=>[(k(!0),x(I,null,J(B.depots,d=>(k(),L(e(z),{key:d.id},{default:l(()=>[t(e(S),null,{default:l(()=>[a("div",re,f(d.name),1),a("div",ne,f(d.description),1)]),_:2},1024),t(e(S),null,{default:l(()=>[a("div",null,f(d.address),1),a("div",null,f(d.postal_code)+" "+f(d.city),1)]),_:2},1024),t(e(S),null,{default:l(()=>[a("div",ue,[t(e(A),{open:g.value,"onUpdate:open":s[9]||(s[9]=n=>g.value=n)},{default:l(()=>[t(e(j),{asChild:""},{default:l(()=>[t(e(_),{variant:"outline",size:"sm",onClick:b(()=>{g.value=!0,E(d)},["stop"])},{default:l(()=>[...s[22]||(s[22]=[r(" Modifier ",-1)])]),_:1},8,["onClick"])]),_:2},1024),t(e(w),null,{default:l(()=>[a("form",{onSubmit:b(n=>R(d),["prevent"])},[t(e(F),null,{default:l(()=>[t(e(N),null,{default:l(()=>[...s[23]||(s[23]=[r("Modifier le dépôt",-1)])]),_:1})]),_:1}),a("div",pe,[a("div",fe,[t(e(u),{for:"edit-name"},{default:l(()=>[...s[24]||(s[24]=[r("Nom du dépôt",-1)])]),_:1}),t(e(v),{id:"edit-name",modelValue:e(o).name,"onUpdate:modelValue":s[6]||(s[6]=n=>e(o).name=n),required:""},null,8,["modelValue"]),t(m,{message:e(o).errors.name},null,8,["message"])]),a("div",_e,[t(e(u),{for:"edit-description"},{default:l(()=>[...s[25]||(s[25]=[r("Description",-1)])]),_:1}),t(e(U),{id:"edit-description",modelValue:e(o).description,"onUpdate:modelValue":s[7]||(s[7]=n=>e(o).description=n),rows:"3"},null,8,["modelValue"]),t(m,{message:e(o).errors.description},null,8,["message"])]),a("div",ge,[t(e(u),{for:"edit-address"},{default:l(()=>[...s[26]||(s[26]=[r("Adresse",-1)])]),_:1}),t(D,{id:"edit-location",modelValue:p.value,"onUpdate:modelValue":s[8]||(s[8]=n=>p.value=n),placeholder:"Rechercher une adresse",required:""},null,8,["modelValue"]),t(m,{message:e(o).errors.address},null,8,["message"])])]),t(e(q),null,{default:l(()=>[t(e(_),{type:"submit",disabled:e(o).processing},{default:l(()=>[...s[27]||(s[27]=[r(" Sauvegarder ",-1)])]),_:1},8,["disabled"])]),_:1})],40,me)]),_:2},1024)]),_:2},1032,["open"]),t(e(_),{variant:"destructive",size:"sm",onClick:n=>G(d)},{default:l(()=>[...s[28]||(s[28]=[r(" Supprimer ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]))}};export{Ee as default};
